# 题目名称：数据流的中位数

## 题目链接：https://leetcode-cn.com/problems/find-median-from-data-stream/

## 题解：

给定数据流的不断输入，要求可以随时返回其中位数。

这里我们还是要考虑要将所有的数存储起来，否则遇到特殊的冲刷情况，就没有办法。

所以这道题，我们要做的是，用什么样的数据结构，能够在不太影响插入速度的情况下，能很快的返回中位数。奇数个返回中位数，偶数个返回中间两个数的平均值。

一般而言，我们维护简单的线性结构，将所有的数据串在一起，就会导致难以快速寻找中位数。但是如果我们将所有数据按照大小存储在两个结构内，同时保证两个结构内存储的数目相差最大为1，同时保留这两个结构的一个最值，那么中位数仅仅与这个最值相关。

那么，第一个问题，我们如何插入？按照一个比较的对象，给它分配这个数应该进入哪个结构，然后看两个结构的大小差别，进行更新。

第二个问题，如何快速找到最值？这里就是我们最后的结果，使用一个存储大数字的小顶堆，和一个存储小数字的大顶堆，而前面提到的那个比较对象就应该是这两个堆的堆顶的值。然后我们插入其中一个堆，大顶堆和小顶堆保证了中值仅仅与两个堆的堆顶值有关，同时两个堆进行数据的平衡，就是数字数目相差最多为1，进行相互更新的时候也仅仅与堆顶有关。

这里确实，不得不说，与AVL树很像，所以可以考虑使用AVL树的类似结构来进行平衡。